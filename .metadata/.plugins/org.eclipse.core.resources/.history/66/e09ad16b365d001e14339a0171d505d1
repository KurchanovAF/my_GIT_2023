// –≠—Ç–æ –º–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ
// –Ω–∞—á–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞ 27 –∏—é–ª—è 2020

// –§—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ static inline void UpdateDataADC2(void){}
// –≤ —Ñ–∞–π–ª–µ stm32l4xx_it.c (—Å—Ç—Ä–æ–∫–∞ 573)
// void my_DataADC2_1(void);

// The DCQ directive allocates one or more eight-byte blocks of memory
// The DCD directive allocates one or more words of memory
// The DCW directive allocates one or more halfwords of memory
// The DCB directive allocates one or more bytes of memory

.cpu cortex-m4
.syntax unified
.thumb

//	.section	my_section_2, "awx"
		//	.section	.data	// –¢–ê–ö –ù–ï –†–ê–ë–û–¢–ê–ï–¢ !!
//	.balign	4

//   AREA my_section_2, CODE, READWRITE, COMDEF, ALIGN=2
// THUMB

//.ascii	"Tolik –£—á–∏—Ç—Å—è"
//.byte	0b11101100	// binary
//.byte	098			// ovtal –ù–ï –†–ê–ë–û–¢–ê–ï–¢
//.byte	75			// decimal
//.byte	0xFA		// hexadecimal
//.float	3.17E-5		// float

//.global pDataDMA2
//pDataDMA2:
//.word	0x00000000
.extern pDataDMA2

.global p_my_DMA2_Data
p_my_DMA2_Data:
.word	0x00000000

.global	p_my_DMA2_Data_F0
p_my_DMA2_Data_F0:
.word	0x00000000

.global p_my_DMA2_Data_F1
p_my_DMA2_Data_F1:
.word	0x00000000

.global p_my_DMA2_Data_F2
p_my_DMA2_Data_F2:
.word	0x00000000

.global p_my_DMA2_Data_F1_F2
p_my_DMA2_Data_F1_F2:
.word	0x00000000

.global p_my_F2F1_rez
p_my_F2F1_rez:
.word	0x00000000

.global p_my_F1F2_rez
p_my_F1F2_rez:
.word	0x00000000

.global p_sum_OUT_2R
p_sum_OUT_2R:
.word	0x00000000

//.global p_sum_OUT_2R_
//p_sum_OUT_2R_:
//.word	0x0000FFFF

.global p_sum_OUT_0R
p_sum_OUT_0R:
.word	0x00000000

//.global p_sum_OUT_0R_
//p_sum_OUT_0R_:
//.word	0x0000FFFF

.global p_rez_OUT_2R
p_rez_OUT_2R:
.word	0x00000000

.global p_sum_SD2
p_sum_SD2:
.word	0x00000000

//.global p_sum_SD2_
//p_sum_SD2_:
//.word	0x0000FFFF
		
.global	my_0x0000FFFF
my_0x0000FFFF:
.word	0x0000FFFF

.global	my_DataADC2_0
.global	my_DataADC2_2	// Ok!
.global	my_F1
.global	my_F1F2
.global	my_F1F2_P
.global	my_F2
.global	my_F2F1
.global	my_F2F1_P
.global	my_F1_F2

.extern sum_OUT_0R

.extern	my_F0_sum          [DATA, SIZE = 4]
.extern	my_DMA2_Data       [DATA, SIZE = 4]
.extern	my_DMA2_Data_F0    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F1    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F2    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F1_F2 [DATA, SIZE = 4]

.extern my_DMA2_Data
	   
.extern	my_DMA2_Data_       [DATA, SIZE = 4]
.extern	my_DMA2_Data_F0_    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F1_    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F2_    [DATA, SIZE = 4]
.extern	my_DMA2_Data_F1_F2_ [DATA, SIZE = 4]
	   
//.extern	p_my_DMA2_Data
//.extern	p_my_DMA2_Data_F0  	[DATA, SIZE = 4]
//.extern	p_my_DMA2_Data_F1  	[DATA, SIZE = 4]
//.extern	p_my_DMA2_Data_F2  	[DATA, SIZE = 4]
//.extern	p_my_DMA2_Data_F1_F2  [DATA, SIZE = 4]
//.extern	p_my_F1F2_rez      [DATA, SIZE = 4]
//.extern	p_my_F2F1_rez      [DATA, SIZE = 4]

/*
.extern	p_my_DMA2_Data_     	[DATA, SIZE = 4]
.extern	p_my_DMA2_Data_F0_  	[DATA, SIZE = 4]
.extern	p_my_DMA2_Data_F1_  	[DATA, SIZE = 4]
.extern	p_my_DMA2_Data_F2_  	[DATA, SIZE = 4]
.extern	p_my_DMA2_Data_F1_F2_  [DATA, SIZE = 4]
.extern	p_my_F1F2_rez_      [DATA, SIZE = 4]
.extern	p_my_F2F1_rez_      [DATA, SIZE = 4]
//*/
	   
	   
//.extern	pDataDMA2
	   
//.extern	p_sum_OUT_2R		[DATA, SIZE = 4]
//.extern	p_sum_OUT_2R_		[DATA, SIZE = 4]
//.extern	p_sum_OUT_0R		[DATA, SIZE = 4]
//.extern	p_sum_OUT_0R_		[DATA, SIZE = 4]
//.extern	p_sum_SD2			[DATA, SIZE = 4]
//.extern	p_sum_SD2_		[DATA, SIZE = 4]
	   
// EXTERN p_rez_OUT_2R		[DATA, SIZE = 4]

//my_F2F1_rez	DCD	0x00000000
//my_F1F2_rez	DCD	0x00000000
//my_F0_sum	DCD	0x00000000
//	 ADC_ARRAY_DMA2_HALF_SIZE  = 360 –æ—Ç—Å—á–µ—Ç–æ–≤, –∞ –Ω–µ –±–∞–π—Ç !
//	 ADC_ARRAY_DMA12_HALF_SIZE = 120

.func	my_DataADC2_0
my_DataADC2_0:
//	; –ü–µ—Ä–µ—Å—ã–ª–∫–∞ –±—É—Ñ–µ—Ä–∞ DMA

	STMFD  SP!, {R0 - R9}
//	; =========================
	LDR R1, =my_DMA2_Data	// Ú‡Í ‡·ÓÚ‡ÂÚ
	LDR R2, =pDataDMA2		// ‡‰ÂÒ Ì‡˜‡Î‡ 120*3*(16 ·ËÚ)
	LDR R2, [R2]			// –ë–µ–∑ —ç—Ç–æ–≥–æ –∑–∞–≤–∏—Å–∞–µ—Ç, —Å —ç—Ç–∏–º - —Ä–∞–±–æ—Ç–∞–µ—Ç
	MOV R0, #30				// 360 = 120*3 = 12*30
my_DataADC2_0_L1:
    LDMIA R2!, {R4-R9}		//  6 —Å–ª–æ–≤ = 12 –ø–æ–ª—É—Å–ª–æ–≤
    // –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ –≤ my_DMA2_Data –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–µ—Ä–Ω–æ
    //MOV	R4, 0x000000FF
    //MOV	R5, 0x0000AEAE
    //MOV	R6, 0x000000FF
    //MOV	R7, 0x0000AEAE
    //MOV	R8, 0x000000FF
    //MOV	R9, 0x0000AEAE
	STMIA R1!, {R4-R9}
	SUB R0, R0, #1
	CMP R0, #0
	BNE my_DataADC2_0_L1
//	–ü–µ—Ä–µ—Å—ã–ª–∫–∞ –±—É—Ñ–µ—Ä–∞ DMA –∑–∞–≤–µ—Ä—à–µ–Ω–∞
//	===========================
    LDMIA  SP!, {R0-R9}
	BX  LR
.endfunc


// –î–∞–Ω–Ω—ã–µ –≤ DMA1_Data –∏–¥—É—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ: OUT_1R, CONTR, SD1, OUT_3R
// –î–∞–Ω–Ω—ã–µ –≤ DMA2_Data –∏–¥—É—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ: OUT_2R, OUT_0R, SD2
// OUT_0R - –≤—ã—Ö–æ–¥ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ 1
// SD1    - –æ–ø–æ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤ 1 –∏ 2
// SD2    - –≤—ã—Ö–æ–¥ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ 2
// OUT_3R - –≤—ã—Ö–æ–¥ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –º–æ—â–Ω–æ—Å—Ç–∏ –°–í–ß, –ø–æ–¥–∞–≤–∞–µ–º–æ–π –Ω–∞ –ª–∞–∑–µ—Ä (–±–µ–∑ —É—Å–∏–ª–µ–Ω–∏—è)
// CONTR  - –≤—ã—Ö–æ–¥ —É—Å–∏–ª–∏—Ç–µ–ª—è –º–æ—Å—Ç–∞ –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ª–∞–∑–µ—Ä–∞
.func
my_DataADC2_2:
	// –†–∞–∑–±–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ 3 —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏
	// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–∏ ‚Ññ1 (–≤—ã—Ö–æ–¥ OUT2)–≤ –º–∞—Å—Å–∏–≤ my_DMA2_Data_F0
	// –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–µ–π ‚Ññ2 (sum_OUT_2R_) –∏ ‚Ññ3 (sum_OUT_0R) –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
	STMDB  SP!, {R0-R12, LR}
	// –í–Ω–∞—á–∞–ª–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º 56 —Å—Ç–∞—Ä—ã—Ö –æ—Ç—Å—á–µ—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ my_DMA2_Data_F0
	LDR R2, =my_DMA2_Data_F0
	ADD R1, R2, #240		//  120*2 = 240
	MOV R0, #4				//  14*4 = 56 –ø–æ–ª—É—Å–ª–æ–≤

my_DataADC2_2_L1:
	LDMIA R1!, {R4-R10}		//  7 —Å–ª–æ–≤ = 14 –ø–æ–ª—É—Å–ª–æ–≤
	STMIA R2!, {R4-R10}
	// ==========================
	SUB R0, R0, #1
    CMP R0, #0
	BNE my_DataADC2_2_L1

	// ==========================
	// LR  - —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_2R
	// R11 - —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_0R
	// R12 - —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_SD2
	// =========================

	LDR R1, =my_DMA2_Data
	MOV R11, #0
	MOV R12, #0
	MOV LR,  #0
	LDR R3, my_0x0000FFFF		// –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
	// R4 - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π
	LDMIA R1!, {R8-R10}
	MOV R0, #60

my_DataADC2_2_L2:
    MOV R5, R8
	MOV R6, R9
	MOV R7, R10
    LDMIA R1!, {R8-R10}			// 3 —Å–ª–æ–≤–∞ = 6 –ø–æ–ª—É—Å–ª–æ–≤
    STRH R5, [R2]				// –ø–æ–ª—É—Å–ª–æ–≤–æ –¥–ª—è my_DMA2_Data_F0
	AND  R4, R5, R3
	ADD LR, LR, R4
	ADD R2, R2, #2				// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_2R
	
	MOVS R4, R5, LSR #16
	ADD R11, R11, R4			// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_0R
	
	AND R4, R6, R3
	ADD R12, R12, R4			// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_SD2
	
	MOVS R4, R6, LSR #16
    STRH R4, [R2]				// –ø–æ–ª—É—Å–ª–æ–≤–æ –¥–ª—è my_DMA2_Data_F0
	AND  R4, R4, R3
	ADD LR, LR, R4
	ADD R2, R2, #2				// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_2R
	
	AND R4, R7, R3
	ADD R11, R11, R4			// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_OUT_0R
	
	MOVS R4, R7, LSR #16
	ADD R12, R12, R4			// —Å—É–º–º–∞—Ç–æ—Ä –¥–ª—è sum_SD2
	
	SUB R0, R0, #1
    // –≠—Ç–∏ 6 –ø–æ–ª—É—Å–ª–æ–≤ —Ä–∞–≤–Ω—ã 12 –±–∞–π—Ç–∞–º –∏ –ø–µ—Ä–µ–¥–∞—á—É –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å 60 —Ä–∞–∑
    // (720 –±–∞–π—Ç –≤ –±—É—Ñ–µ—Ä–µ my_DMA2_Data)
	CMP R0, #0
	BNE my_DataADC2_2_L2
	// –†–∞–∑–±–æ—Ä –±—É—Ñ–µ—Ä–∞ –Ω–∞ 3 —á–∞—Å—Ç–∏ –æ–∫–æ–Ω—á–µ–Ω

	//LDR R1, p_sum_OUT_2R_
	//STR LR, [R1]
	LDR R1, =p_sum_OUT_2R
	LDR R2, [R1]
	ADD R2, R2, LR
	STR R2, [R1]
	//

	//LDR R1, p_sum_OUT_0R_
	//STR R11, [R1]
	LDR R1, =sum_OUT_0R			// –∞–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞ sum_OUT_0R
	LDR R2, [R1]				// –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–ª–∏—á–∏–Ω—ã sum_OUT_0R
	ADD R2, R2, R11
	STR R2, [R1]
	//
	//LDR R1, p_sum_SD2_
	//STR R12, [R1]
	LDR R1, =p_sum_SD2
	LDR R2, [R1]
	ADD R2, R2, R12
	STR R2, [R1]
	// =========================
    LDMIA  SP!, {R0-R12, LR}		// 1+13=14
	BX  LR						// 1
.endfunc

.func
my_F1:
	// –†–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F1 = 10 –∫–ì—Ü (–º–æ–¥—É–ª—è—Ü–∏—è –¥–ª—è –ß–ê–°–¢–û–¢–´)
	// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –º–∞—Å—Å–∏–≤ my_DMA2_Data_F1
	//
	// 120 + 6 + 5 + (1 –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫)
	// 120 + 6 –¥–ª—è F1 126 = 3*42
	// 120 +5 + (1 –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫) –¥–ª—è F2 126 = 3*42
	// 120 –¥–ª—è F1_F2
	//
	STMDB  SP!, {R0-R12, LR}	// 1+13=14
	// LR - –Ω–µ –∏–∑–º–µ–Ω—è–µ–º
	// =========================
	MOV LR, #12					// 120 –ø–æ–ª—É—Å–ª–æ–≤ –≤ –≤—ã—Ö–æ–¥–Ω–æ–º –±—É—Ñ–µ—Ä–µ
	LDR R0, =my_DMA2_Data_F0	// 	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞
	ADD R0, R0, #52				// 52 = 26*2
	ADD R1, R0, #60				// 60 = 30*2
    LDR R2, =my_DMA2_Data_F1	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    // —Å–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–∂–µ–∫—Ü–∏–∏ —Ä–∞–≤–Ω–æ 30 –æ—Ç—Å—á–µ—Ç–æ–≤
	//
my_F1_L1:
	LDMIA R0!, {R3-R7  }			// 3 —Å–ª–æ–≤–∞ = 6 –ø–æ–ª—É—Å–ª–æ–≤
    LDMIA R1!, {R8-R12 }			// 3 —Å–ª–æ–≤–∞ = 6 –ø–æ–ª—É—Å–ª–æ–≤ R13 = LR

	ADD R3, R3, R8
    STR R3, [R2]
	ADD R2, R2, #4

	ADD R4, R4, R9
    STR R4, [R2]
	ADD R2, R2, #4

	ADD R5, R5, R10
    STR R5, [R2]
	ADD R2, R2, #4
	
	ADD R6, R6, R11
    STR R6, [R2]
	ADD R2, R2, #4
	
	ADD R7, R7, R12
    STR R7, [R2]
	ADD R2, R2, #4

	// —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ 5 —Å–ª–æ–≤, 10 –ø–æ–ª—É—Å–ª–æ–≤

	SUB LR, LR, #1
	CMP LR, #0
	BNE my_F1_L1
	//
	// –†–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F1 —Å –ø–µ—Ä–∏–æ–¥–æ–º 12 –æ—Ç—Å—á–µ—Ç–æ–≤ –æ–∫–æ–Ω—á–µ–Ω–∞
	// =========================
    LDMIA  SP!, {R0-R12, LR}
	BX  LR
.endfunc

.func
my_F2:
	// –†–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F2 = 12 –∫–ì—Ü
	// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –º–∞—Å—Å–∏–≤ my_DMA2_Data_F1
	//
	// –ø–µ—Ä–∏–æ–¥ = 10, 5/2 –ø–µ—Ä–∏–æ–¥–∞ = 25
	// –¥–ª–∏–Ω–∞ my_DMA2_Data_F0 = 176*3 –ø–æ–ª—É—Å–ª–æ–≤ = 88*3 —Å–ª–æ–≤
	// –¥–ª–∏–Ω–∞ my_DMA2_Data_F1 = 150 = 120 + 30
	//
	STMDB  SP!, {R0-R12, LR}
	// =========================
	//
	MOV LR, #25					// 150 = 6*25
	//
	LDR R0, =my_DMA2_Data_F2	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	LDR R1, =my_DMA2_Data_F0	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120+56)*3*(32 –±–∏—Ç)
	//
	//ADD R1, R1, #2			–Ω–µ–ª—å–∑—è, –Ω–µ –∫—Ä–∞—Ç–Ω–æ 4
	ADD R2, R1, #52				// 52 = 26*2
	MOV R9, #0
	//
	LDMIA R1!, {R3}				// 1 —Å–ª–æ–≤–æ = 2 –ø–æ–ª—É—Å–ª–æ–≤–∞
my_F2_L1:
	LDMIA R1!, {R4-R6}			// 4 —Å–ª–æ–≤–∞ = 8 –ø–æ–ª—É—Å–ª–æ–≤
	LDMIA R2!, {R7-R9}			// 3 —Å–ª–æ–≤–∞ = 6 –ø–æ–ª—É—Å–ª–æ–≤
	//
	//							   –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ				A1D
	MOVS R10, R3, LSR #16		// —Å—Ç–∞—Ä—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ 			A1U
	MOVS R11, R4, LSL #16		// –º–ª–∞–¥—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ			A2D
	ADD  R7, R7, R10			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ –º–ª–∞–¥—à–µ–π —á–∞—Å—Ç–∏ 	B1D
	MOVS R12, R4, LSR #16		// —Å—Ç–∞—Ä—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ			A2U
	ADD  R7, R7, R11			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—Ç–∞—Ä—à–µ–π —á–∞—Å—Ç–∏	B1U
	ADD  R8, R8, R12			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ –º–ª–∞–¥—à–µ–π —á–∞—Å—Ç–∏	B2D
	MOVS R10, R5, LSL #16		// –º–ª–∞–¥—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ			A3D
	ADD  R8, R8, R10			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—Ç–∞—Ä—à–µ–π —á–∞—Å—Ç–∏	B2U
	STR  R7, [R0]				// —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–ª–æ–≤–æ ‚Ññ1			C1
	ADD  R0, R0, #4				// –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	MOVS R10, R5, LSR #16		// —Å—Ç–∞—Ä—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ			A3U
	//
	STR  R8, [R0]				// —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–ª–æ–≤–æ ‚Ññ2			C2
	ADD  R0, R0, #4				// –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	//
	ADD  R9, R9, R10			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ –º–ª–∞–¥—à–µ–π —á–∞—Å—Ç–∏	B3D
	MOVS R11, R6, LSL #16		// –º–ª–∞–¥—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ			A3D
	MOV  R3, R6					// —Å—Ç–∞—Ä—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
								// –≤ –Ω–∞—á–∞–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞
	ADD  R9, R9, R11			// –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—Ç–∞—Ä—à–µ–π —á–∞—Å—Ç–∏	B3U
	SUB LR, LR, #1				// 1
	STR  R9, [R0]				// —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–ª–æ–≤–æ ‚Ññ3
	ADD  R0, R0, #4				// –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	//
	CMP LR, #0					// 1
	//
	BNE my_F2_L1
	// –†–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F2 —Å –ø–µ—Ä–∏–æ–¥–æ–º 10 –æ—Ç—Å—á–µ—Ç–æ–≤ –æ–∫–æ–Ω—á–µ–Ω–∞
	// =========================
    LDMIA  SP!, {R0-R12, LR}
	BX  LR
.endfunc

// 5 —Ñ–∞–∑, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ =5 —ç—Ç–æ "–î–õ–?–ù–ê –í–û–õ–ù–´ = F2"
// 6 —Ñ–∞–∑, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ =6 —ç—Ç–æ "–ß–ê–°–¢–û–¢–ê	   = F1"
// 12 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ 12 –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–Ω–æ—Å—Ç–µ–π, –≤—Å–µ–≥–æ 24 –≤ —Å—É–º–º–µ
.func
my_F1F2:
	// —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä —á–∞—Å—Ç–æ—Ç—ã F1 –ø–æ—Å–ª–µ —Ä–µ–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è F2
	STMDB  SP!, {R0-R12, LR}
	// =========================
	MOV R0, #12	// —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–æ–≤
	LDR R1, =my_DMA2_Data_F1	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120)*(16 –±–∏—Ç)
	// R1 - –∞–¥—Ä–µ—Å –¥–ª—è p_my_DMA2_Data_F1[6]

	//LDR R14, =0x0000FFFF	// —Ç–∞–∫ –∑–∞–≤–∏—Å–∞–µ—Ç
	LDR R14, my_0x0000FFFF	// —Ç–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç
	//
	MOV R8,	 #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	MOV R9,  #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	MOV R10, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	MOV R11, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	MOV R12, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
my_F1F2_L1:
    // –≤ —Ü–∏–∫–ª–µ 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω–æ—Å—Ç–µ–π, –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ 120
	// —Ü–∏–∫–ª –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å 12 —Ä–∞–∑
	LDMIA R1!, {R3-R7}		// –∑–∞–≥—Ä—É–∑–∏–ª–∏ 10 –ø–æ–ª—É—Å–ª–æ–≤, –≤ –ø–µ—Ä–∏–æ–¥–µ 10 –ø–æ–ª—É—Å–ª–æ–≤
							// –≤ 1/2 –ø–µ—Ä–∏–æ–¥–∞ 5 –ø–æ–ª—É—Å–ª–æ–≤
	STMDB  SP!, {R0}		// –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
	// –ù–ê–ß–ê–õ–û –í–´–ß–?–°–õ–ï–ù–?–Ø 5 –ü–†–Ø–ú–´–• –§–ê–ó, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞
	// R15 == LR
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[0]
	SUB  R2, R0, R2
	ADD  R8, R8, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1 –í–ï–†–ù–û

    AND  R0, R6, R14
	MOVS R2, R3, LSR #16	// R3 - —Å–≤–æ–±–æ–¥–µ–Ω
	SUB  R2, R0, R2
	ADD  R9, R9, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2 –í–ï–†–ù–û
	//
	MOV R3, R4
	MOV R4, R5
	MOV R5, R6
	MOV R6, R7				// R7 - —Ç–µ–ø–µ—Ä—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
	//
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[2]
	SUB  R2, R0, R2
	ADD  R10, R10, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3 –û–®–?–ë–ö–ê (–æ—Ç–ª–∏—á–∏–µ –Ω–∞ 1)

    AND  R0, R6, R14
	MOVS R2, R3, LSR #16	// R3 - —Å–≤–æ–±–æ–¥–µ–Ω
	SUB  R2, R0, R2
	ADD  R11, R11, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4 –í–ï–†–ù–û
	//
	MOV R3, R4
	MOV R4, R5
	MOV R5, R6				// R6 - —Ç–µ–ø–µ—Ä—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
	//
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[4]
	SUB  R2, R0, R2
	ADD  R12, R12, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5 –û–®–?–ë–ö–ê (–æ—Ç–ª–∏—á–∏–µ –Ω–∞ 2)
	//
	//
	//
	LDMIA  SP!, {R0}
	SUB R0, R0, #1
	CMP R0, #0
	BNE my_F1F2_L1
	// =========================
	LDR R2, =my_F1F2_rez	//	–∞–¥—Ä–µ—Å —Å—É–º–º–∞—Ç–æ—Ä–∞ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π ‚Ññ1 (–¥–∞–ª–µ–µ –¥–æ ‚Ññ5)
	STR R8, [R2]
	ADD R2, R2, #4
	STR R9, [R2]
	ADD R2, R2, #4
	STR R10, [R2]
	ADD R2, R2, #4
	STR R11, [R2]
	ADD R2, R2, #4
	STR R12, [R2]
	//
    LDMIA  SP!, {R0-R12, LR}
	BX  LR
.endfunc

//========================================
.func
my_F1F2_P:
	// —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä 2-–π –≥–∞—Ä–º–æ–Ω–∏–∫–∏ —á–∞—Å—Ç–æ—Ç—ã F1 –ø–æ—Å–ª–µ —Ä–µ–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è F2
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º —á–∞—Å—Ç–æ—Ç—É —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∞ 6 —Ç–∞–∫—Ç–æ–≤
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º 2-—é –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Å–ø–µ–∫—Ç—Ä–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è —è—á–µ–π–∫–∏
	// –æ—Ç–ª–∏—á–∏–µ –æ—Ç my_F1F2 - –≤–º–µ—Å—Ç–æ 6 —Ñ–∞–∑ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π –Ω–∞—Ö–æ–¥–∏–º 6 —Ñ–∞–∑ —Å—É–º–º,
	// –∞ —É–∂–µ –ø–æ—Ç–æ–º —ç—Ç–∏ —Å—É–º–º—ã –±—É–¥—É—Ç –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω–æ—Å—Ç–∏....
	STMDB  SP!, {R0-R12, LR}
	// =========================
	MOV R0, #12	// —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–æ–≤
	LDR R1, =my_DMA2_Data_F1	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120)*(16 –±–∏—Ç)
	// R1 - –∞–¥—Ä–µ—Å –¥–ª—è p_my_DMA2_Data_F1[6]

	//LDR R14, =0x0000FFFF	// —Ç–∞–∫ –∑–∞–≤–∏—Å–∞–µ—Ç
	LDR R14, my_0x0000FFFF	// —Ç–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç
	//
	MOV R8,	 #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	MOV R9,  #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	MOV R10, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	MOV R11, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	MOV R12, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
my_F1F2_P_L1:
    // –≤ —Ü–∏–∫–ª–µ 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É–º–º, –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ 120
	// —Ü–∏–∫–ª –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å 12 —Ä–∞–∑
	LDMIA R1!, {R3-R7}		// –∑–∞–≥—Ä—É–∑–∏–ª–∏ 10 –ø–æ–ª—É—Å–ª–æ–≤, –≤ –ø–µ—Ä–∏–æ–¥–µ 10 –ø–æ–ª—É—Å–ª–æ–≤
							// –≤ 1/2 –ø–µ—Ä–∏–æ–¥–∞ 5 –ø–æ–ª—É—Å–ª–æ–≤
	STMDB  SP!, {R0}		// –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
	// –ù–ê–ß–ê–õ–û –í–´–ß–?–°–õ–ï–ù–?–Ø 5 –ü–†–Ø–ú–´–• –§–ê–ó, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞
	// R15 == LR
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[0]
	//SUB  R2, R0, R2
	ADD  R2, R0, R2			// –º–ª–∞–¥—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ –∏–∑ R3 –ø–ª—é—Å —Å—Ç–∞—Ä—à–µ–µ –ø–æ–ª—É—Å–ª–æ–≤–æ –∏–∑ R5, —Ä–∞–∑–Ω–∏—Ü–∞ 5 –æ—Ç—Å—á–µ—Ç–æ–≤ –ê–¶–ü
	ADD  R8, R8, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1 –í–ï–†–ù–û

    AND  R0, R6, R14
	MOVS R2, R3, LSR #16	// R3 - —Å–≤–æ–±–æ–¥–µ–Ω
	//SUB  R2, R0, R2
	ADD  R2, R0, R2
	ADD  R9, R9, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2 –í–ï–†–ù–û
	//
	MOV R3, R4
	MOV R4, R5
	MOV R5, R6
	MOV R6, R7				// R7 - —Ç–µ–ø–µ—Ä—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
	//
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[2]
	//SUB  R2, R0, R2
	ADD  R2, R0, R2
	ADD  R10, R10, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3 –û–®–?–ë–ö–ê (–æ—Ç–ª–∏—á–∏–µ –Ω–∞ 1)

    AND  R0, R6, R14
	MOVS R2, R3, LSR #16	// R3 - —Å–≤–æ–±–æ–¥–µ–Ω
	//SUB  R2, R0, R2
	ADD  R2, R0, R2
	ADD  R11, R11, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4 –í–ï–†–ù–û
	//
	MOV R3, R4
	MOV R4, R5
	MOV R5, R6				// R6 - —Ç–µ–ø–µ—Ä—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
	//
	MOVS R0, R5, LSR #16
	AND  R2, R3, R14		// –≤ –º–ª–∞–¥—à–µ–π –ø–æ–ª–æ–≤–∏–Ω–µ R3 my_DMA2_Data_F1_[4]
	//SUB  R2, R0, R2
	ADD  R2, R0, R2
	ADD  R12, R12, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5 –û–®–?–ë–ö–ê (–æ—Ç–ª–∏—á–∏–µ –Ω–∞ 2)
	//
	//	—Å–µ–π—á–∞—Å R1 —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏—é 0 + 10 = 10
	//
	LDMIA  SP!, {R0}
	SUB R0, R0, #1
	CMP R0, #0
	BNE my_F1F2_P_L1
	// =========================
	LDR R2, =my_F1F2_P_rez	//	–∞–¥—Ä–µ—Å —Å—É–º–º–∞—Ç–æ—Ä–∞ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π ‚Ññ1 (–¥–∞–ª–µ–µ –¥–æ ‚Ññ5)
	STR R8, [R2]
	ADD R2, R2, #4
	STR R9, [R2]
	ADD R2, R2, #4
	STR R10, [R2]
	ADD R2, R2, #4
	STR R11, [R2]
	ADD R2, R2, #4
	STR R12, [R2]
	//
    LDMIA  SP!, {R0-R12, LR}
	BX  LR
.endfunc

//========================================

.func
my_F2F1:
	// —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä —á–∞—Å—Ç–æ—Ç—ã F2 –ø–æ—Å–ª–µ —Ä–µ–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è F1
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º —á–∞—Å—Ç–æ—Ç—É —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∞ 5 —Ç–∞–∫—Ç–æ–≤
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º –î–õ–?–ù–£ –í–û–õ–ù–´
	STMDB  SP!, {R0-R12, LR}	// 1+13=14
	// =========================
	MOV R0, #10
	LDR R1,  =my_DMA2_Data_F2	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120+30)*(16 –±–∏—Ç)
	ADD R1, R1, #60				//  –∞–¥—Ä–µ—Å –¥–ª—è my_DMA2_Data_F2[0] (+30 –æ—Ç—Å—á–µ—Ç–æ–≤)
	LDR R7, my_0x0000FFFF		//  —Ç–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç

	MOV R8,	 #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	MOV R9,  #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	MOV R10, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	MOV R11, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	MOV R12, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
	MOV R14, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ6
	//
my_F2F1_L1:
    // –≤ —Ü–∏–∫–ª–µ 6 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω–æ—Å—Ç–µ–π, –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ 120
	// —Ü–∏–∫–ª –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å 10 —Ä–∞–∑
	//
	LDMIA R1!, {R3-R6}		// –∑–∞–≥—Ä—É–∑–∏–ª–∏ 8 –ø–æ–ª—É—Å–ª–æ–≤, –≤ –ø–µ—Ä–∏–æ–¥–µ 12 –ø–æ–ª—É—Å–ª–æ–≤
							// –≤ 1/2 –ø–µ—Ä–∏–æ–¥–∞ 6 –ø–æ–ª—É—Å–ª–æ–≤
	STMDB  SP!, {R0}		// –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
	//
	//
	// –ù–ê–ß–ê–õ–û –í–´–ß–?–°–õ–ï–ù–?–Ø 6 –ü–†–Ø–ú–´–• –§–ê–ó, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞
	AND R0, R6, R7
	AND R2, R3, R7
	SUB R2, R0, R2
	ADD R8, R8, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	//
	MOVS R0, R6, LSR #16
	MOVS R2, R3, LSR #16
	SUB  R2, R0, R2
	ADD  R9, R9, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	//
	MOV R3, R4				// —Å–¥–≤–∏–≥ –Ω–∞ 1 —Å–ª–æ–≤–æ
	MOV R4, R5
	MOV R5, R6
	LDMIA R1!, {R6}			// –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ 10 –ø–æ–ª—É—Å–ª–æ–≤
	//
	AND R0,   R6, R7
	AND R2,   R3, R7
	SUB R2,   R0, R2
	ADD R10, R10, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	//
	MOVS R0,   R6, LSR #16
	MOVS R2,   R3, LSR #16
	SUB  R2,   R0, R2
	ADD  R11, R11, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	//
	MOV R3, R4				// —Å–¥–≤–∏–≥ –Ω–∞ 1 —Å–ª–æ–≤–æ
	MOV R4, R5	// —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ç—É—Ç –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, R4 –Ω–µ –Ω—É–∂–µ–Ω
	MOV R5, R6	// —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ç—É—Ç –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, R5 –Ω–µ –Ω—É–∂–µ–Ω
	LDMIA R1!, {R6}			// –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ 12 –ø–æ–ª—É—Å–ª–æ–≤
	//
	AND  R0,  R6, R7
	AND  R2,  R3, R7
	SUB  R2,  R0, R2
	ADD R12, R12, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
	//
	MOVS  R0,  R6, LSR #16
	MOVS  R2,  R3, LSR #16
	SUB   R2,  R0, R2
	ADD  R14, R14, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ6
	//
	LDMIA  SP!, {R0}
	//
	SUB R0, R0, #1		// 1
	CMP R0, #0			// 1
	BNE my_F2F1_L1		// 2
	// =========================
	LDR R2, =my_F2F1_rez	//	–∞–¥—Ä–µ—Å —Å—É–º–º–∞—Ç–æ—Ä–∞ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π ‚Ññ1 (–¥–∞–ª–µ–µ –¥–æ ‚Ññ5)
	STR R8, [R2]
	ADD R2, R2, #4
	STR R9, [R2]
	ADD R2, R2, #4
	STR R10, [R2]
	ADD R2, R2, #4
	STR R11, [R2]
	ADD R2, R2, #4
	STR R12, [R2]
	ADD R2, R2, #4
	STR R14, [R2]
	//
    LDMIA  SP!, {R0-R12, LR}	// 1+13=14
	BX  LR
.endfunc

//===================================
.func
my_F2F1_P:
	// —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä 2-–π –≥–∞—Ä–º–æ–Ω–∏–∫–∏ —á–∞—Å—Ç–æ—Ç—ã F2 –ø–æ—Å–ª–µ —Ä–µ–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è F1
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º —á–∞—Å—Ç–æ—Ç—É —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∞ 5 —Ç–∞–∫—Ç–æ–≤
	// –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –æ—Ç –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä–∞ —á–∞—Å—Ç–æ—Ç—ã
	// –æ—Ç–ª–∏—á–∏–µ –æ—Ç my_F2F1 - –≤–º–µ—Å—Ç–æ 5 —Ñ–∞–∑ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π –Ω–∞—Ö–æ–¥–∏–º 5 —Ñ–∞–∑ —Å—É–º–º,
	// –∞ —É–∂–µ –ø–æ—Ç–æ–º —ç—Ç–∏ —Å—É–º–º—ã –±—É–¥—É—Ç –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω–æ—Å—Ç–∏....
	STMDB  SP!, {R0-R12, LR}	// 1+13=14
	// =========================
	MOV R0, #10
	LDR R1,  =my_DMA2_Data_F2	//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120+30)*(16 –±–∏—Ç)
	ADD R1, R1, #60				//  –∞–¥—Ä–µ—Å –¥–ª—è my_DMA2_Data_F2[0] (+30 –æ—Ç—Å—á–µ—Ç–æ–≤)
	LDR R7, my_0x0000FFFF		//  —Ç–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç

	MOV R8,	 #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	MOV R9,  #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	MOV R10, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	MOV R11, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	MOV R12, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
	MOV R14, #0		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ6
	//
my_F2F1_P_L1:
    // –≤ —Ü–∏–∫–ª–µ 6 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω–æ—Å—Ç–µ–π, –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ 120
	// —Ü–∏–∫–ª –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å 10 —Ä–∞–∑
	//
	LDMIA R1!, {R3-R6}		// –∑–∞–≥—Ä—É–∑–∏–ª–∏ 8 –ø–æ–ª—É—Å–ª–æ–≤, –≤ –ø–µ—Ä–∏–æ–¥–µ 12 –ø–æ–ª—É—Å–ª–æ–≤
							// –≤ 1/2 –ø–µ—Ä–∏–æ–¥–∞ 6 –ø–æ–ª—É—Å–ª–æ–≤
	STMDB  SP!, {R0}		// –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
	//
	//
	// –ù–ê–ß–ê–õ–û –í–´–ß–?–°–õ–ï–ù–?–Ø 6 –ü–†–Ø–ú–´–• –§–ê–ó, –ø–æ–ª–æ–≤–∏–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞
	AND R0, R6, R7
	AND R2, R3, R7
	//SUB R2, R0, R2
	ADD R2, R0, R2
	ADD R8, R8, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ1
	//
	MOVS R0, R6, LSR #16
	MOVS R2, R3, LSR #16
	//SUB  R2, R0, R2
	ADD R2, R0, R2
	ADD  R9, R9, R2			// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ2
	//
	MOV R3, R4				// —Å–¥–≤–∏–≥ –Ω–∞ 1 —Å–ª–æ–≤–æ
	MOV R4, R5
	MOV R5, R6
	LDMIA R1!, {R6}			// –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ 10 –ø–æ–ª—É—Å–ª–æ–≤
	//
	AND R0,   R6, R7
	AND R2,   R3, R7
	//SUB R2,   R0, R2
	ADD R2, R0, R2
	ADD R10, R10, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ3
	//
	MOVS R0,   R6, LSR #16
	MOVS R2,   R3, LSR #16
	//SUB  R2,   R0, R2
	ADD R2, R0, R2
	ADD  R11, R11, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ4
	//
	MOV R3, R4				// —Å–¥–≤–∏–≥ –Ω–∞ 1 —Å–ª–æ–≤–æ
	MOV R4, R5	// —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ç—É—Ç –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, R4 –Ω–µ –Ω—É–∂–µ–Ω
	MOV R5, R6	// —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ç—É—Ç –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, R5 –Ω–µ –Ω—É–∂–µ–Ω
	LDMIA R1!, {R6}			// –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ 12 –ø–æ–ª—É—Å–ª–æ–≤
	//
	AND  R0,  R6, R7
	AND  R2,  R3, R7
	//SUB  R2,  R0, R2
	ADD R2, R0, R2
	ADD R12, R12, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ5
	//
	MOVS  R0,  R6, LSR #16
	MOVS  R2,  R3, LSR #16
	//SUB   R2,  R0, R2
	ADD R2, R0, R2
	ADD  R14, R14, R2		// —Å—É–º–º–∞—Ç–æ—Ä ‚Ññ6
	//
	LDMIA  SP!, {R0}
	//
	SUB R0, R0, #1		// 1
	CMP R0, #0			// 1
	BNE my_F2F1_P_L1		// 2
	// =========================
	LDR R2, =my_F2F1_P_rez	//	–∞–¥—Ä–µ—Å —Å—É–º–º–∞—Ç–æ—Ä–∞ —Å—É–º–º ‚Ññ1 (–¥–∞–ª–µ–µ –¥–æ ‚Ññ5)
	STR R8, [R2]
	ADD R2, R2, #4
	STR R9, [R2]
	ADD R2, R2, #4
	STR R10, [R2]
	ADD R2, R2, #4
	STR R11, [R2]
	ADD R2, R2, #4
	STR R12, [R2]
	ADD R2, R2, #4
	STR R14, [R2]
	//
    LDMIA  SP!, {R0-R12, LR}	// 1+13=14
	BX  LR
.endfunc
//===================================


.func
my_F1_F2:
	// —Ä–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F2 –ø–æ—Å–ª–µ —Ä–µ–∂–µ–∫—Ü–∏–∏ —á–∞—Å—Ç–æ—Ç—ã F1, –∏–Ω—Ç–µ—Ä–≤–∞–ª 30 –æ—Ç—Å—á–µ—Ç–æ–≤
	//
	// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –º–∞—Å—Å–∏–≤ DMA2_Data_F1_F2
	//
	STMDB  SP!, {R0-R12, LR}
	// =========================
	//
	//MOV R0, #20
	// 150 –ø–æ–ª—É—Å–ª–æ–≤ = 75 —Å–ª–æ–≤ = 4 + 57(=3*19) + 2
	// –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ü–∏–∫–ª–µ —á—Ç–µ–Ω–∏–µ LDMIA R1!, {R7-R9}
	// –∏ 4 –∫–æ–º–∞–Ω–¥—ã MOV –≤ –∫–æ–Ω—Ü–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∏ –Ω–∞ —á—Ç–æ - –æ–Ω–∏ –ª–∏—à–Ω–∏–µ, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ—Ä—Ç–∏—Ç—å –Ω–µ —Ö–æ—á–µ—Ç—Å—è
	//
	//LDR R1, =my_DMA2_Data_F1		//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120+30)*(16 –±–∏—Ç)
    //LDR R2, =my_DMA2_Data_F1_F2		//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	//
	//LDMIA R1!, {R3-R6}

	LDR R0, =my_DMA2_Data_F1_F2		//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
	LDR R1, =my_DMA2_Data_F2		//	–∞–¥—Ä–µ—Å –Ω–∞—á–∞–ª–∞ (120+30)*(16 –±–∏—Ç)
	ADD R2, R1, #60					//  60 = 2*30, 30 –æ—Ç—Å—á–µ—Ç–æ–≤
	MOV	LR, #15						//  75 = 5*15

my_F1_F2_L1:
	LDMIA R1!, {R3-R7}				// 5 —Å–ª–æ–≤
	LDMIA R2!, {R8-R12}				// 5 —Å–ª–æ–≤
	ADD	R8,  R3, R8
	ADD R9,  R4, R9
	ADD R10, R5, R10
	ADD R11, R6, R11
	ADD R12, R7, R12
	STMIA R0!, {R8-R12}
	//
	SUB LR, LR, #1
	CMP LR, #0
	//
	BNE my_F1_F2_L1
	//
	// –†–µ–∂–µ–∫—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã F2 —Å –ø–µ—Ä–∏–æ–¥–æ–º 10 –æ—Ç—Å—á–µ—Ç–æ–≤ –æ–∫–æ–Ω—á–µ–Ω–∞
	// =========================
    LDMIA  SP!, {R0-R12, LR}
	BX  LR
.endfunc
		
.end
